<!DOCTYPE html>
<html>
<head>
    <title>NLP Tools</title>
    <style>
        body {
            background: #111111;
            color: #eeeeee;
            font-family: 'Segoe UI', Arial, sans-serif;
            margin: 0;
            padding: 0;
        }
        .header {
            background: #222222;
            color: #eeeeee;
            padding: 1rem 2rem;
            margin-bottom: 2rem;
            border-bottom: 1px solid #333333;
        }
        .task-bar {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-bottom: 2rem;
        }
        .task-btn {
            background: #111111;
            color: #eeeeee;
            border: 1px solid #cccccc;
            border-radius: 5px;
            padding: 0.7rem 1.5rem;
            font-size: 1rem;
            cursor: pointer;
            transition: background 0.2s, color 0.2s;
            text-decoration: none;
        }
        .task-btn.active, .task-btn:hover {
            background: #e0e0e0;
            color: #111111;
        }
        .container {
            max-width: 600px;
            margin: 0 auto;
            background: #222222;
            border-radius: 10px;
            padding: 2rem;
            box-shadow: 0 2px 16px #0008;
        }
        label {
            color: #e0e0e0;
            font-weight: bold;
        }
        select, textarea {
            width: 100%;
            margin-bottom: 1rem;
            background: #111111;
            color: #eeeeee;
            border: 1px solid #cccccc;
            border-radius: 4px;
            padding: 0.5rem;
        }
        .go-btn {
            background: #e0e0e0;
            color: #111111;
            border: 1px solid #cccccc;
            border-radius: 4px;
            padding: 0.5rem 1.2rem;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            margin-left: 0.5rem;
        }
        .go-btn:hover {
            background: #ffffff;
        }
        .example-row {
            display: flex;
            align-items: center;
            margin-bottom: 0.5rem;
        }
        .example-row select {
            flex: 1;
            margin-bottom: 0;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>NLP Toolbox</h1>
    </div>
    <div class="task-bar">
        <a href="/?task=sentiment" class="task-btn{% if task == 'sentiment' %} active{% endif %}">Sentiment</a>
        <a href="/?task=ner" class="task-btn{% if task == 'ner' %} active{% endif %}">NER</a>
        <a href="/?task=summarize" class="task-btn{% if task == 'summarize' %} active{% endif %}">Summarize</a>
        <a href="/?task=emotion" class="task-btn{% if task == 'emotion' %} active{% endif %}">Emotion</a>
        <a href="/?task=qa" class="task-btn{% if task == 'qa' %} active{% endif %}">QA</a>
    </div>
    <div style="display: flex; justify-content: center; align-items: flex-start; gap: 2rem; max-width: 1200px; margin: 0 auto;">
        <div class="container" style="flex: 2;">
            <form id="nlp-form" action="/analyze/{{ task | default('sentiment') }}" method="post">
                <label>Choose an example:</label>
                {% if task == "qa" %}
                    {% for text in example_texts[:5] %}
                    {% set parts = text.split('||') %}
                    <div class="example-row">
                        <div style="flex:1;">
                            <span style="color:#e0e0e0;font-weight:bold;">Q:</span> {{ parts[0] }}<br>
                            <span style="color:#e0e0e0;font-weight:bold;">Context:</span> <span style="color:#e0e0e0;">{{ parts[1] }}</span>
                        </div>
                        <button type="button" class="go-btn" data-question="{{ parts[0]|e }}" data-context="{{ parts[1]|e }}">Go</button>
                    </div>
                    {% endfor %}
                    <label>Or enter your own:</label><br>
                    <label>Question:</label>
                    <textarea name="text" id="user-text" rows="2" cols="50" placeholder="Enter your question..."></textarea>
                    <label>Context:</label>
                    <textarea name="context" id="user-context" rows="4" cols="50" placeholder="Enter the context to search for the answer..."></textarea>
                    <button type="submit" class="go-btn">Go</button>
                {% elif task == "summarize" %}
                    {% for text in example_texts[:5] %}
                    <div class="example-row" style="align-items: flex-start;">
                        <div style="flex:1; max-height: 120px; overflow-y: auto; background: #191919; color: #eeeeee; border-radius: 6px; padding: 0.7rem; margin-bottom: 0.5rem; font-size: 1rem;">
                            {{ text }}
                        </div>
                        <button type="button" class="go-btn" data-summary="{{ text|e }}">Go</button>
                    </div>
                    {% endfor %}
                     <label>Or enter your own text:</label><br>
                    <textarea name="text" id="user-text" rows="6" cols="50"></textarea>
                    <button type="submit" class="go-btn">Go</button>
                {% else %}
                    {% for text in example_texts[:10] %}
                    <div class="example-row">
                        <select name="example" onchange="handleExampleChange(this)">
                            <option value="{{ text }}">{{ text }}</option>
                        </select>
                        <button type="button" class="go-btn" onclick="submitExample(this)">Go</button>
                    </div>
                    {% endfor %}
                    <label>Or enter your own text:</label><br>
                    <textarea name="text" id="user-text" rows="4" cols="50"></textarea>
                    <button type="submit" class="go-btn">Go</button>
                {% endif %}
            </form>
        </div>
        {% set model_infos = {
          'sentiment': {
            'title': 'Sentiment (TextBlob)',
            'model': 'TextBlob (PatternAnalyzer)',
            'accuracy': '~60-70% on movie reviews (not SOTA, but fast and simple)',
            'used_by': 'Prototyping, education, quick sentiment checks',
            'description': 'Rule-based, lexicon-driven sentiment analysis.'
          },
          'ner': {
            'title': 'NER (spaCy en_core_web_sm)',
            'model': 'spaCy en_core_web_sm',
            'accuracy': '~85% F-score (CoNLL-2003 NER)',
            'used_by': 'Explosion AI, research, industry demos',
            'description': 'Lightweight English NER, POS, and dependency parser.'
          },
          'summarize': {
            'title': 'Summarize (t5-small)',
            'model': 'HuggingFace t5-small',
            'accuracy': 'ROUGE-2 F1 ~18-20 (CNN/DailyMail)',
            'used_by': 'Research, demos, low-resource summarization',
            'description': 'Transformer-based, pre-trained for text-to-text tasks.'
          },
          'emotion': {
            'title': 'Emotion (distilbert-base-uncased-emotion)',
            'model': 'bhadresh-savani/distilbert-base-uncased-emotion',
            'accuracy': '~91% (GoEmotions dataset)',
            'used_by': 'Emotion detection demos, chatbots',
            'description': 'DistilBERT fine-tuned for emotion classification.'
          },
          'qa': {
            'title': 'QA (distilbert-base-cased-distilled-squad)',
            'model': 'distilbert/distilbert-base-cased-distilled-squad',
            'accuracy': 'EM: 79.1, F1: 86.9 (SQuAD v1.1)',
            'used_by': 'Lightweight QA demos, education',
            'description': 'DistilBERT distilled from BERT, fine-tuned on SQuAD.'
          }
        } %}
        <div class="model-info-box" style="flex:1; min-width:260px; max-width:340px; background:#222222; border-radius:8px; color:#eeeeee; padding:1.5em; margin-top:0; margin-bottom:1em;">
          <h3 style="color:#eeeeee;">Model Information</h3>
          {% set info = model_infos.get(task, {}) %}
          <div>
            <strong>{{ info.title }}</strong><br>
            <b>Model:</b> {{ info.model }}<br>
            <b>Accuracy:</b> {{ info.accuracy }}<br>
            <b>Used by:</b> {{ info.used_by }}<br>
            <b>Description:</b> {{ info.description }}
          </div>
        </div>
        {% set blurbs = {
          'sentiment': 'Analyzes the emotional tone and objectivity of text. Uses a dictionary-based approach that scores sentiment from -1 (very negative) to +1 (very positive) and subjectivity from 0 (factual) to 1 (opinionated). Handles word combinations, negations, and intensifiers through rule-based processing. This method is fast and interpretable, making it ideal for real-time applications and when you need to understand why a particular score was assigned.',
          'ner': 'Identifies and categorizes named entities in text such as people, organizations, locations, dates, and more. Uses spaCy\'s neural network model that has been trained on millions of documents to recognize entity patterns. The system can distinguish between different types of entities (like "Apple" the company vs "apple" the fruit) based on context. Outputs precise character positions for each entity found, making it easy to highlight or extract specific information from large documents.',
          'summarize': 'Creates concise summaries of longer text while preserving key information and meaning. Uses Google\'s T5 (Text-to-Text Transfer Transformer) model that has been pre-trained on a massive dataset of text pairs. The model reads the full text, understands the main points, and generates a new summary that captures the essential information. This is different from simple extraction - it can rephrase and combine information to create more coherent summaries. Particularly effective for news articles, research papers, and long-form content.',
          'emotion': 'Classifies text into specific emotional categories like joy, sadness, anger, fear, surprise, and disgust. Uses a specialized version of BERT (Bidirectional Encoder Representations from Transformers) that has been fine-tuned on emotion-labeled datasets. The model analyzes word patterns and context to determine the emotional state expressed in the text. Returns both the most likely emotion and confidence scores for all possible emotions, providing insight into the emotional complexity of the text. Useful for understanding customer feedback, social media sentiment, and emotional content analysis.',
          'qa': 'Answers questions by finding relevant information within a provided context or document. Uses a question-answering model trained on Stanford\'s SQuAD dataset, which contains thousands of question-answer pairs from Wikipedia articles. The system works by understanding both the question and the context, then identifying the specific text span that answers the question. Unlike search engines that return entire documents, this extracts the exact answer from the text. The model can handle various question types including who, what, when, where, and how questions, making it useful for document analysis, customer support, and information retrieval systems.'
        } %}
        <div class="blurb-box" style="flex:1; min-width:260px; max-width:340px; background:#1a1a1a; border-radius:8px; color:#e0e0e0; padding:1.2em; border:1px solid #333333;">
          <h3 style="color:#eeeeee; margin-top:0;">What this does</h3>
          <div style="font-size:0.95rem; line-height:1.5;">{{ blurbs.get(task, '') }}</div>
        </div>
    </div>
    <script>
    function handleExampleChange(select) {
        // No-op: handled on button click
    }
    function submitExample(btn) {
        var form = document.getElementById('nlp-form');
        var select = btn.parentElement.querySelector('select');
        var value = select.value;
        var task = "{{ task }}";
        if (task === "qa") {
            // Not used for QA, handled by fillQAExample
        } else {
            document.getElementById('user-text').value = value;
        }
        form.submit();
    }
    // Add event listeners for QA Go buttons
    document.querySelectorAll('.go-btn[data-question]').forEach(function(btn) {
        btn.addEventListener('click', function() {
            document.getElementById('user-text').value = btn.getAttribute('data-question');
            document.getElementById('user-context').value = btn.getAttribute('data-context');
            document.getElementById('nlp-form').submit();
        });
    });
    // Add event listeners for Summarize Go buttons
    document.querySelectorAll('.go-btn[data-summary]').forEach(function(btn) {
        btn.addEventListener('click', function() {
            document.getElementById('user-text').value = btn.getAttribute('data-summary');
            document.getElementById('nlp-form').submit();
        });
    });
    </script>
</body>
</html>