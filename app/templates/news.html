<!DOCTYPE html>
<html>
<head>
  <title>ABC News Analysis</title>
  <link rel="stylesheet" href="/static/style.css">
</head>
<body>
  <header class="page-header">
    <div class="container">
      <h1>ABC News Analysis</h1>
      <p class="subtitle">Select a category, browse headlines, and run analyses.</p>
    </div>
  </header>

  <section class="container">
    <form class="analysis-form" method="get" action="/news/browse">
      <label for="feed">Select ABC feed</label>
      <select id="feed" name="feed_name" onchange="this.form.submit()">
        <option value="top_stories" {% if feed_name=='top_stories' %}selected{% endif %}>Top Stories</option>
        <option value="australia" {% if feed_name=='australia' %}selected{% endif %}>Australia</option>
        <option value="just_in" {% if feed_name=='just_in' %}selected{% endif %}>Just In</option>
      </select>
    </form>

    {% if articles %}
      <div class="results-section">
        {% for a in articles %}
          <div class="article-block">
            <h3 style="margin:0;">{{ a.title }}</h3>
            <p class="meta" style="opacity:0.7; margin:0.25rem 0 0.5rem 0;">{{ a.published }}</p>
            <div>{{ a.summary|safe }}</div>
            <div style="margin-top:0.6rem; display:flex; gap:0.5rem; flex-wrap:wrap;">
              <a href="{{ a.link }}" target="_blank" class="button-secondary">Read Article</a>
              <a href="/news/analyze?feed_name={{ feed_name }}&index={{ loop.index0 }}&tools=sentiment" class="button-primary">Run Sentiment</a>
              <a href="/news/analyze?feed_name={{ feed_name }}&index={{ loop.index0 }}&tools=ner" class="button-primary">Run NER</a>
              <a href="/news/analyze?feed_name={{ feed_name }}&index={{ loop.index0 }}&tools=summarize" class="button-primary">Run Summarise</a>
              <a href="/news/analyze?feed_name={{ feed_name }}&index={{ loop.index0 }}&tools=emotion" class="button-primary">Run Emotion</a>
              <a href="/news/analyze?feed_name={{ feed_name }}&index={{ loop.index0 }}&tools=sentiment,ner,summarize,emotion" class="button-secondary">Run Full Pipeline</a>
            </div>
          </div>
        {% endfor %}
      </div>
    {% else %}
      <div class="results">No articles available.</div>
    {% endif %}

    <div style="text-align:center; margin-top:1rem;">
      <a href="/home" class="button-secondary">Back to Landing</a>
    </div>
  </section>
</body>
</html>
